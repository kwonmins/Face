<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì—°ì˜ˆì¸ í—¤ì–´ìŠ¤íƒ€ì¼ í•©ì„±ê¸°</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <style>
      .hidden {
        display: none;
      }
      .spinner {
        width: 40px;
        height: 40px;
        border: 5px solid #ccc;
        border-top-color: #4a90e2;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin: 20px auto;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
    </style>
  </head>
  <body>
    <header>ğŸ¨ ì—°ì˜ˆì¸ í—¤ì–´ìŠ¤íƒ€ì¼ í•©ì„±ê¸°</header>

    <form id="uploadForm" action="/upload" method="POST" enctype="multipart/form-data">
      <label>ğŸ™‹â€â™‚ï¸ ì‚¬ìš©ì ì–¼êµ´ ì‚¬ì§„:</label>
      <input type="file" name="user" accept="image/*" required id="userInput" />

      <label>ğŸ¬ ì—°ì˜ˆì¸ ìŠ¤íƒ€ì¼ ì‚¬ì§„:</label>
      <input type="file" name="style" accept="image/*" required id="styleInput" />

      <label>ğŸŒˆ ì—¼ìƒ‰ ìƒ‰ìƒ ì°¸ê³  ì´ë¯¸ì§€:</label>
      <input type="file" name="color" accept="image/*" required id="colorInput" />

      <button type="submit">ë³€í™˜ ì‹œì‘</button>
    </form>

    <div class="preview">
      <div class="side-by-side" id="inputPreview"></div>
    </div>

    <!-- âœ… ë¡œë”© ì• ë‹ˆë©”ì´ì…˜ í‘œì‹œ -->
    <div id="loading" class="hidden">
      <div class="spinner"></div>
      <p>ğŸŒ€ ìŠ¤íƒ€ì¼ í•©ì„± ì¤‘ì…ë‹ˆë‹¤... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</p>
    </div>

    <footer>Â© 2025 FastStyleGAN Demo</footer>

    <script>
      window.addEventListener("DOMContentLoaded", () => {
        const userInput = document.getElementById("userInput");
        const styleInput = document.getElementById("styleInput");
        const colorInput = document.getElementById("colorInput");
        const inputPreview = document.getElementById("inputPreview");
        const loading = document.getElementById("loading");
        const form = document.getElementById("uploadForm");

        function handlePreview(input, id) {
          const file = input.files[0];
          if (!document.getElementById(id)) {
            const img = document.createElement("img");
            img.id = id;
            inputPreview.appendChild(img);
          }
          const reader = new FileReader();
          reader.onload = (e) => {
            document.getElementById(id).src = e.target.result;
          };
          reader.readAsDataURL(file);
        }

        userInput.addEventListener("change", () => handlePreview(userInput, "userPreview"));
        styleInput.addEventListener("change", () => handlePreview(styleInput, "stylePreview"));
        colorInput.addEventListener("change", () => handlePreview(colorInput, "colorPreview"));

        form.addEventListener("submit", (e) => {
          if (userInput.files[0] && styleInput.files[0] && colorInput.files[0]) {
            loading.classList.remove("hidden");
          } else {
            e.preventDefault();
            alert("ëª¨ë“  íŒŒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”.");
          }
        });
      });
    </script>
  </body>
</html>
